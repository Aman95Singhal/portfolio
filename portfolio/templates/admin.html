{% extends 'base.html' %}
{% block content %}
<div class="row">
  <div class="col-md-8">
    <h2>Admin</h2>
    <p>Upload images and set project images here. Uploaded images will be processed into multiple responsive sizes.</p>
    <form id="upload-form" method="post" action="/admin/upload" enctype="multipart/form-data">
      <div class="mb-3">
        <label class="form-label">Project Slug (e.g., transaction-master)</label>
        <input name="slug" class="form-control" required>
      </div>
      <div class="mb-3">
        <label class="form-label">Image File</label>
        <input id="upload-file" name="file" type="file" accept="image/*" class="form-control" required>
        <img id="upload-preview" src="" class="img-fluid mt-2" style="max-height:180px; display:none;" />
        <div class="progress mt-2" style="height:8px; display:none;" id="upload-progress">
          <div class="progress-bar" role="progressbar" style="width:0%" id="upload-progress-bar"></div>
        </div>
      </div>
      <div class="mb-3">
        <label class="form-label">Set as project image?</label>
        <div class="form-check">
          <input class="form-check-input" type="checkbox" name="assign" id="assign" checked>
          <label class="form-check-label" for="assign">Yes</label>
        </div>
      </div>
      <button class="btn btn-primary">Upload</button>
    </form>
    <div class="mt-3" id="lead-indicator" x-data="{count:0}">
      <strong>New leads:</strong> <span id="lead-count" x-text="count">0</span>
    </div>
    <hr>
    <h4>Uploaded images</h4>
    <div class="row">
      {% for f in uploads %}
      <div class="col-md-3 mb-3">
        <div class="card">
          <img src="/static/img/uploads/{{ f }}" class="card-img-top" style="height:120px; object-fit:cover;" />
          <div class="card-body small">
            {{ f }}
          </div>
        </div>
      </div>
      {% endfor %}
    </div>
  </div>
  <div class="col-md-4">
    <h4>Actions</h4>
    <form method="post" action="/admin/upload_resume" enctype="multipart/form-data">
      <div class="mb-3">
        <label class="form-label">Upload Resume (PDF)</label>
        <input name="resume" type="file" accept="application/pdf" class="form-control">
      </div>
      <button class="btn btn-secondary">Upload Resume</button>
    </form>
  </div>
</div>
<script src="/static/js/admin.js"></script>
{% endblock %}