{% extends 'base.html' %}
{% block meta %}
<meta property="og:image" content="{{ project.image if project.image else '/static/img/transaction-master.svg' }}">
<title>{{ project.title }} â€” Aman Singhal</title>
{% endblock %}
{% block content %}
<div class="row">
  <div class="col-md-8">
    <h2>{{ project.title }}</h2>
    <p>{{ project.details }}</p>
    <p><strong>Tech:</strong> {{ project.tech | join(', ') }}</p>
    {% if project.link %}
    <p><a href="{{ project.link }}" target="_blank">Project Link</a></p>
    {% endif %}
    <a class="btn btn-outline-primary" href="/projects">Back to projects</a>

    <hr>
    <h4>Comments</h4>
    <div hx-get="/projects/{{ project.slug }}/comments" hx-trigger="load" hx-target="#comments-container" hx-swap="innerHTML">
      <div id="comments-container">Loading comments...</div>
    </div>
  </div>
  <div class="col-md-4">
    {% if project.image %}
      {% set ext = project.image.split('.')[-1].lower() %}
      {% if ext == 'webp' %}
        <picture>
          <source type="image/webp" srcset="{{ project.image.replace('-1200.webp','-600.webp') }} 600w, {{ project.image }} 1200w, {{ project.image.replace('-1200.webp','-1800.webp') }} 1800w" sizes="(max-width: 768px) 100vw, 33vw">
          <img src="{{ project.image }}" alt="{{ project.title }}" class="img-fluid rounded project-thumb" loading="lazy" style="cursor:pointer;" data-large="{{ project.image.replace('-1200.webp','-1800.webp') }}"/>
        </picture>
      {% else %}
        <img src="{{ project.image }}" alt="{{ project.title }}" class="img-fluid rounded project-thumb" loading="lazy" style="cursor:pointer;" data-large="{{ project.image }}"/>
      {% endif %}
    {% endif %}
  </div>
</div>
{% endblock %}